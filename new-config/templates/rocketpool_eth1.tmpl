# Autogenerated - DO NOT MODIFY THIS FILE DIRECTLY 
# If you want to overwrite some of these values with your own customizations,
# please add them to `override/rocketpool_eth1.yml`.
# 
# See https://docs.docker.com/compose/extends/#adding-and-overriding-configuration
# for more information on overriding specific parameters of docker-compose files.

version: "3.8"
services:
  eth1:
    image: ${ETH1_IMAGE}
    container_name: ${COMPOSE_PROJECT_NAME}_eth1
    restart: unless-stopped
    stop_grace_period: 3m
    ports:
      - "${ETH1_P2P_PORT:-30303}:${ETH1_P2P_PORT:-30303}/udp"
      - "${ETH1_P2P_PORT:-30303}:${ETH1_P2P_PORT:-30303}/tcp"
      ${ETH1_OPEN_API_PORTS} # TODO: envsubst
      # Uncomment the following lines to allow other non-Docker processes on your system to use the ETH1 API
      # - "8545:8545/tcp"
      # - "8546:8546/tcp"
    volumes:
      - eth1clientdata:/ethclient
      - ./chains/eth1:/setup:ro
    networks:
      - net
    environment:
      - CLIENT=${ETH1_CLIENT}
      - ETHSTATS_LABEL=${ETHSTATS_LABEL}
      - ETHSTATS_LOGIN=${ETHSTATS_LOGIN}
      - INFURA_PROJECT_ID=${INFURA_PROJECT_ID}
      - POCKET_PROJECT_ID=${POCKET_PROJECT_ID}
      - HTTP_PROVIDER_URL=${HTTP_PROVIDER_URL}
      - WS_PROVIDER_URL=${WS_PROVIDER_URL}
      - GETH_CACHE_SIZE=${GETH_CACHE_SIZE}
      - GETH_MAX_PEERS=${GETH_MAX_PEERS}
      - ETH1_P2P_PORT=${ETH1_P2P_PORT}
    entrypoint: sh
    command: "/setup/start-node.sh"
    cap_drop:
      - all
    cap_add:
      - dac_override
    security_opt:
      - no-new-privileges
networks:
  net:
volumes:
  eth1clientdata: